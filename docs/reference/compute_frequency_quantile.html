<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Calculate an annual frequency analysis quantile — compute_frequency_quantile • fasstr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Calculate an annual frequency analysis quantile — compute_frequency_quantile" />
<meta property="og:description" content="Performs a volume frequency analysis on annual statistics from a streamflow dataset and calculates a statistic based on
   the provided mean n-days and return period of the statistic, defaults to minimum flows. For example, to determine the 7Q10 of a 
   dataset, set the roll_days to 7 and the return_period to 10. Calculates the statistic from all daily discharge 
   values from all years and months, unless specified.Function will calculate using all values in the provided data (no grouped 
   analysis). Analysis methodology replicates that from HEC-SSP." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fasstr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/fasstr.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/fasstr_users_guide.html">Users Guide</a>
    </li>
    <li>
      <a href="../articles/fasstr_trending_analysis.html">Computing Annual Trends</a>
    </li>
    <li>
      <a href="../articles/fasstr_frequency_analysis.html">Computing Volume Frequency Analyses</a>
    </li>
    <li>
      <a href="../articles/fasstr_full_analysis.html">Computing a Full Analysis</a>
    </li>
    <li>
      <a href="../articles/fasstr_under_the_hood.html">Under the Hood</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/bcgov/fasstr/raw/master/fasstr_cheatsheet.pdf">
    <span class="fa fa-file-download"></span>
     
    Download Cheatsheet
  </a>
</li>
<li>
  <a href="https://github.com/bcgov/fasstr">
    <span class="fa fa-github fa-lg"></span>
     
    GitHub
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculate an annual frequency analysis quantile</h1>
    <small class="dont-index">Source: <a href='https://github.com/bcgov/fasstr/blob/master/R/compute_frequency_quantile.R'><code>R/compute_frequency_quantile.R</code></a></small>
    <div class="hidden name"><code>compute_frequency_quantile.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Performs a volume frequency analysis on annual statistics from a streamflow dataset and calculates a statistic based on
   the provided mean n-days and return period of the statistic, defaults to minimum flows. For example, to determine the 7Q10 of a 
   dataset, set the roll_days to <code>7</code> and the return_period to <code>10</code>. Calculates the statistic from all daily discharge 
   values from all years and months, unless specified.Function will calculate using all values in the provided data (no grouped 
   analysis). Analysis methodology replicates that from <a href='http://www.hec.usace.army.mil/software/hec-ssp/'>HEC-SSP</a>.</p>
    </div>

    <pre class="usage"><span class='fu'>compute_frequency_quantile</span>(
  <span class='no'>data</span>,
  <span class='kw'>dates</span> <span class='kw'>=</span> <span class='no'>Date</span>,
  <span class='kw'>values</span> <span class='kw'>=</span> <span class='no'>Value</span>,
  <span class='no'>station_number</span>,
  <span class='kw'>roll_days</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>roll_align</span> <span class='kw'>=</span> <span class='st'>"right"</span>,
  <span class='kw'>return_period</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>use_max</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>use_log</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>fit_distr</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"PIII"</span>, <span class='st'>"weibull"</span>),
  <span class='kw'>fit_distr_method</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span>(<span class='no'>fit_distr</span> <span class='kw'>==</span> <span class='st'>"PIII"</span>, <span class='st'>"MOM"</span>, <span class='st'>"MLE"</span>),
  <span class='kw'>water_year_start</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='no'>start_year</span>,
  <span class='no'>end_year</span>,
  <span class='no'>exclude_years</span>,
  <span class='kw'>months</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>12</span>,
  <span class='kw'>ignore_missing</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>remove_zeros</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>A data frame of flow data that contains columns of events, flow values, and measures (data type).</p></td>
    </tr>
    <tr>
      <th>dates</th>
      <td><p>Column in <code>data</code> that contains dates formatted YYYY-MM-DD. Only required if dates column name is not '
Date' (default). Leave blank if using <code>station_number</code> argument.</p></td>
    </tr>
    <tr>
      <th>values</th>
      <td><p>Column in <code>data</code> that contains numeric flow values, in units of cubic metres per second. Default <code>"Value"</code>.</p></td>
    </tr>
    <tr>
      <th>station_number</th>
      <td><p>A character string vector of seven digit Water Survey of Canada station numbers (e.g. <code>"08NM116"</code>) of
which to extract daily streamflow data from a HYDAT database. Requires <code>tidyhydat</code> package and a HYDAT database.
Leave blank if using <code>data</code> argument.</p></td>
    </tr>
    <tr>
      <th>roll_days</th>
      <td><p>Numeric value of the number of days to apply a rolling mean. Required.</p></td>
    </tr>
    <tr>
      <th>roll_align</th>
      <td><p>Character string identifying the direction of the rolling mean from the specified date, either by the first 
('left'), last ('right), or middle ('center') day of the rolling n-day group of observations. Default <code>'right'</code>.</p></td>
    </tr>
    <tr>
      <th>return_period</th>
      <td><p>Numeric vector of the estimated time interval, in years, between flow events of a similar size, 
inverse of probability, used to estimate the frequency statistic. Required.</p></td>
    </tr>
    <tr>
      <th>use_max</th>
      <td><p>Logical value to indicate using annual maximums rather than the minimums for analysis. Default <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>use_log</th>
      <td><p>Logical value to indicate log-scale transforming of flow data before analysis. Default <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>fit_distr</th>
      <td><p>Character string identifying the distribution to fit annual data, one of "PIII" (Pearson Log III distribution) 
or "weibull" (Weibull distribution). Default <code>"PIII"</code>.</p></td>
    </tr>
    <tr>
      <th>fit_distr_method</th>
      <td><p>Character string identifying the method used to fit the distribution, one of  "MOM" (method of moments) 
or "MLE" (maximum likelihood estimation). Selected as <code>"MOM"</code> if <code>fit_distr</code>=="PIII" (default) or <code>"MLE"</code> if 
 <code>fit_distr</code>=="weibull".</p></td>
    </tr>
    <tr>
      <th>water_year_start</th>
      <td><p>Numeric value indicating the month of the start of the water year for analysis. Default <code>1</code>.</p></td>
    </tr>
    <tr>
      <th>start_year</th>
      <td><p>Numeric value of the first year to consider for analysis. Leave blank to use the first year of the source data.</p></td>
    </tr>
    <tr>
      <th>end_year</th>
      <td><p>Numeric value of the last year to consider for analysis. Leave blank to use the last year of the source data.</p></td>
    </tr>
    <tr>
      <th>exclude_years</th>
      <td><p>Numeric vector of years to exclude from analysis. Leave blank to include all years.</p></td>
    </tr>
    <tr>
      <th>months</th>
      <td><p>Numeric vector of months to include in analysis (e.g.. <code>6:8</code> for Jun-Aug). Leave blank to summarize 
all months (default <code>1:12</code>).</p></td>
    </tr>
    <tr>
      <th>ignore_missing</th>
      <td><p>Logical value indicating whether dates with missing values should be included in the calculation. If
<code>TRUE</code> then a statistic will be calculated regardless of missing dates. If <code>FALSE</code> then only statistics from time periods 
with no missing dates will be returned. Default <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>remove_zeros</th>
      <td><p>Logical value to indicate removing any minimum values of zero from the dataset.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A numeric value of the frequency analysis quantile, given the roll_days and return_period</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='compute_frequency_analysis.html'>compute_frequency_analysis</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> (<span class='fl'>FALSE</span>) {

<span class='co'># Working example:</span>

<span class='co'># Compute the annual 7-day flow value with a 1 in 10 year return interval</span>
<span class='fu'>compute_frequency_quantile</span>(<span class='kw'>station_number</span> <span class='kw'>=</span> <span class='st'>"08NM116"</span>,
                           <span class='kw'>roll_days</span> <span class='kw'>=</span> <span class='fl'>7</span>,
                           <span class='kw'>return_period</span> <span class='kw'>=</span> <span class='fl'>10</span>)

}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Jon Goetz, Carl James Schwarz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


