<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Write a suite of tables and plots from various fasstr functions into a directory — write_full_analysis • fasstr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Write a suite of tables and plots from various fasstr functions into a directory — write_full_analysis" />
<meta property="og:description" content="Calculates and writes tables and plots from a suite of statistics from fasstr functions into 
   an Excel workbook, and accompanying plot files for certain analyses. Due to the number of tables and plots to be made, this 
   function may take several minutes to complete. If using ignore_missing = FALSE (default) and there is missing data, 
   some tables and plots may be empty and produce warnings. Use ignore_missing = TRUE to ignore the missing values or 
   filter your data to complete years." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fasstr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/fasstr.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/fasstr_users_guide.html">Users Guide</a>
    </li>
    <li>
      <a href="../articles/fasstr_trending_analysis.html">Computing Annual Trends</a>
    </li>
    <li>
      <a href="../articles/fasstr_frequency_analysis.html">Computing Volume Frequency Analyses</a>
    </li>
    <li>
      <a href="../articles/fasstr_full_analysis.html">Computing a Full Analysis</a>
    </li>
    <li>
      <a href="../articles/fasstr_under_the_hood.html">Under the Hood</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/bcgov/fasstr/raw/master/fasstr_cheatsheet.pdf">
    <span class="fa fa-file-download"></span>
     
    Download Cheatsheet
  </a>
</li>
<li>
  <a href="https://github.com/bcgov/fasstr">
    <span class="fa fa-github fa-lg"></span>
     
    GitHub
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Write a suite of tables and plots from various fasstr functions into a directory</h1>
    <small class="dont-index">Source: <a href='https://github.com/bcgov/fasstr/blob/master/R/write_full_analysis.R'><code>R/write_full_analysis.R</code></a></small>
    <div class="hidden name"><code>write_full_analysis.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Calculates and writes tables and plots from a suite of statistics from fasstr functions into 
   an Excel workbook, and accompanying plot files for certain analyses. Due to the number of tables and plots to be made, this 
   function may take several minutes to complete. If using <code>ignore_missing = FALSE</code> (default) and there is missing data, 
   some tables and plots may be empty and produce warnings. Use <code>ignore_missing = TRUE</code> to ignore the missing values or 
   filter your data to complete years.</p>
    </div>

    <pre class="usage"><span class='fu'>write_full_analysis</span>(
  <span class='no'>data</span>,
  <span class='kw'>dates</span> <span class='kw'>=</span> <span class='no'>Date</span>,
  <span class='kw'>values</span> <span class='kw'>=</span> <span class='no'>Value</span>,
  <span class='kw'>groups</span> <span class='kw'>=</span> <span class='no'>STATION_NUMBER</span>,
  <span class='no'>station_number</span>,
  <span class='kw'>analyses</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>7</span>,
  <span class='no'>basin_area</span>,
  <span class='kw'>water_year_start</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='no'>start_year</span>,
  <span class='no'>end_year</span>,
  <span class='no'>exclude_years</span>,
  <span class='kw'>ignore_missing</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>zyp_method</span> <span class='kw'>=</span> <span class='st'>"yuepilon"</span>,
  <span class='no'>zyp_alpha</span>,
  <span class='no'>file_name</span>,
  <span class='kw'>plot_filetype</span> <span class='kw'>=</span> <span class='st'>"pdf"</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>A data frame of daily data that contains columns of dates, flow values, and (optional) groups (e.g. station numbers).
Leave blank if using <code>station_number</code> argument.</p></td>
    </tr>
    <tr>
      <th>dates</th>
      <td><p>Column in <code>data</code> that contains dates formatted YYYY-MM-DD. Only required if dates column name is not '
Date' (default). Leave blank if using <code>station_number</code> argument.</p></td>
    </tr>
    <tr>
      <th>values</th>
      <td><p>Column in <code>data</code> that contains numeric flow values, in units of cubic metres per second.
Only required if values column name is not 'Value' (default). Leave blank if using <code>station_number</code> argument.</p></td>
    </tr>
    <tr>
      <th>groups</th>
      <td><p>Column in <code>data</code> that contains unique identifiers for different data sets, if applicable. Only required if
groups column name is not 'STATION_NUMBER'. Function will automatically group by a column named 'STATION_NUMBER' if present.
Remove the 'STATION_NUMBER' column beforehand to remove this grouping. Leave blank if using <code>station_number</code> argument.</p></td>
    </tr>
    <tr>
      <th>station_number</th>
      <td><p>A character string vector of seven digit Water Survey of Canada station numbers (e.g. <code>"08NM116"</code>) of
which to extract daily streamflow data from a HYDAT database. Requires <code>tidyhydat</code> package and a HYDAT database.
Leave blank if using <code>data</code> argument.</p></td>
    </tr>
    <tr>
      <th>analyses</th>
      <td><p>Numeric vector of analyses to run (default is all (<code>1:7</code>)):</p><ul>
<li><p>1: Screening</p></li>
<li><p>2: Long-term</p></li>
<li><p>3: Annual</p></li>
<li><p>4: Monthly</p></li>
<li><p>5: Daily</p></li>
<li><p>6: Annual Trends</p></li>
<li><p>7: Low-flow Frequencies</p></li>
</ul></td>
    </tr>
    <tr>
      <th>basin_area</th>
      <td><p>Upstream drainage basin area, in square kilometres, to apply to observations. Three options:</p>
<p>(1) Leave blank if <code>groups</code> is STATION_NUMBER with HYDAT station numbers to extract basin areas from HYDAT.</p>
<p>(2) A single numeric value to apply to all observations.</p>
<p>(3) List each basin area for each group/station in groups (can override HYDAT value if listed) as such <code><a href='https://rdrr.io/r/base/c.html'>c("08NM116" = 795, 
"08NM242" = 10)</a></code>. If group is not listed the HYDAT area will be applied if it exists, otherwise it will be NA.</p></td>
    </tr>
    <tr>
      <th>water_year_start</th>
      <td><p>Numeric value indicating the month of the start of the water year for analysis. Default <code>1</code>.</p></td>
    </tr>
    <tr>
      <th>start_year</th>
      <td><p>Numeric value of the first year to consider for analysis. Leave blank to use the first year of the source data.</p></td>
    </tr>
    <tr>
      <th>end_year</th>
      <td><p>Numeric value of the last year to consider for analysis. Leave blank to use the last year of the source data.</p></td>
    </tr>
    <tr>
      <th>exclude_years</th>
      <td><p>Numeric vector of years to exclude from analysis. Leave blank to include all years.</p></td>
    </tr>
    <tr>
      <th>ignore_missing</th>
      <td><p>Logical value indicating whether dates with missing values should be included in the calculation. If
<code>TRUE</code> then a statistic will be calculated regardless of missing dates. If <code>FALSE</code> then only statistics from time periods 
with no missing dates will be returned. Default <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>zyp_method</th>
      <td><p>Character string identifying the prewhitened trend method to use from 'zyp', either "zhang' or "yuepilon". 
Only required if analysis group 6 is included. Default <code>"yuepilon"</code>.</p></td>
    </tr>
    <tr>
      <th>zyp_alpha</th>
      <td><p>Numeric value of the significance level (ex. 0.05) of when to plot a trend line. Leave blank for no line.</p></td>
    </tr>
    <tr>
      <th>file_name</th>
      <td><p>Character string of the name of the Excel Workbook (and folder for plots if necessary) to create on drive to 
write all results.</p></td>
    </tr>
    <tr>
      <th>plot_filetype</th>
      <td><p>Image type to write. One of "png", "eps", "ps", "tex", "pdf", "jpeg", "tiff", "bmp", or "svg".
If not "pdf" then individual plots will be created instead of a combined PDF. Default <code>"pdf"</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='compute_full_analysis.html'>compute_full_analysis</a></code>,
         <code><a href='screen_flow_data.html'>screen_flow_data</a></code>,
         <code><a href='plot_data_screening.html'>plot_data_screening</a></code>,
         <code><a href='plot_missing_dates.html'>plot_missing_dates</a></code>,
         <code><a href='calc_longterm_monthly_stats.html'>calc_longterm_monthly_stats</a></code>,
         <code><a href='plot_longterm_monthly_stats.html'>plot_longterm_monthly_stats</a></code>,
         <code><a href='calc_longterm_daily_stats.html'>calc_longterm_daily_stats</a></code>,
         <code><a href='plot_longterm_daily_stats.html'>plot_longterm_daily_stats</a></code>,
         <code><a href='plot_flow_duration.html'>plot_flow_duration</a></code>,
         <code><a href='calc_annual_stats.html'>calc_annual_stats</a></code>,
         <code><a href='plot_annual_stats.html'>plot_annual_stats</a></code>,
         <code><a href='calc_annual_cumulative_stats.html'>calc_annual_cumulative_stats</a></code>,
         <code><a href='plot_annual_cumulative_stats.html'>plot_annual_cumulative_stats</a></code>,
         <code><a href='calc_annual_flow_timing.html'>calc_annual_flow_timing</a></code>,
         <code><a href='plot_annual_flow_timing.html'>plot_annual_flow_timing</a></code>,
         <code><a href='calc_annual_outside_normal.html'>calc_annual_outside_normal</a></code>,
         <code><a href='plot_annual_outside_normal.html'>plot_annual_outside_normal</a></code>,
         <code><a href='calc_annual_lowflows.html'>calc_annual_lowflows</a></code>,
         <code><a href='plot_annual_lowflows.html'>plot_annual_lowflows</a></code>,
         <code><a href='plot_annual_means.html'>plot_annual_means</a></code>,
         <code><a href='calc_monthly_stats.html'>calc_monthly_stats</a></code>,
         <code><a href='plot_monthly_stats.html'>plot_monthly_stats</a></code>,
         <code><a href='calc_monthly_cumulative_stats.html'>calc_monthly_cumulative_stats</a></code>,
         <code><a href='plot_monthly_cumulative_stats.html'>plot_monthly_cumulative_stats</a></code>,
         <code><a href='calc_daily_stats.html'>calc_daily_stats</a></code>,
         <code><a href='plot_daily_stats.html'>plot_daily_stats</a></code>,
         <code><a href='calc_daily_cumulative_stats.html'>calc_daily_cumulative_stats</a></code>,
         <code><a href='plot_daily_cumulative_stats.html'>plot_daily_cumulative_stats</a></code>,
         <code><a href='compute_annual_trends.html'>compute_annual_trends</a></code>,
         <code><a href='compute_annual_frequencies.html'>compute_annual_frequencies</a></code>,
         <code><a href='write_flow_data.html'>write_flow_data</a></code>,
         <code><a href='write_plots.html'>write_plots</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> (<span class='fl'>FALSE</span>) {

<span class='co'># Working examples:</span>

<span class='co'># Save a full analysis will all the analyses</span>
<span class='fu'>write_full_analysis</span>(<span class='kw'>station_number</span> <span class='kw'>=</span> <span class='st'>"08NM116"</span>,
                    <span class='kw'>file_name</span> <span class='kw'>=</span> <span class='st'>"Mission Creek"</span>,
                    <span class='kw'>start_year</span> <span class='kw'>=</span> <span class='fl'>1980</span>,
                    <span class='kw'>end_year</span> <span class='kw'>=</span> <span class='fl'>2010</span>)

<span class='co'># Save a full analysis with only Annual and Daily analyses</span>
<span class='fu'>write_full_analysis</span>(<span class='kw'>station_number</span> <span class='kw'>=</span> <span class='st'>"08NM116"</span>,
                    <span class='kw'>file_name</span> <span class='kw'>=</span> <span class='st'>"Mission Creek"</span>,
                    <span class='kw'>start_year</span> <span class='kw'>=</span> <span class='fl'>1980</span>,
                    <span class='kw'>end_year</span> <span class='kw'>=</span> <span class='fl'>2010</span>,
                    <span class='kw'>analyses</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>3</span>,<span class='fl'>5</span>))

}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Jon Goetz, Carl James Schwarz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


